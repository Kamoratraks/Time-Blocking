<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Sectograph Planner</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #4e54c8;
            --secondary: #8f94fb;
            --bg: #f4f7fc;
            --card-bg: #ffffff;
            --text-main: #333;
            --text-muted: #888;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        body {
            font-family: 'Prompt', sans-serif;
            background: var(--bg);
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* --- Layout --- */
        .app-container {
            width: 90%;
            max-width: 1000px;
            height: 85vh;
            background: var(--card-bg);
            border-radius: 30px;
            box-shadow: var(--shadow);
            display: flex;
            overflow: hidden;
            position: relative;
        }

        /* --- Sidebar (Left) --- */
        .sidebar {
            width: 350px;
            background: #fafbff;
            border-right: 1px solid #eee;
            padding: 30px;
            display: flex;
            flex-direction: column;
        }

        .header {
            margin-bottom: 30px;
        }
        .header h1 { margin: 0; font-size: 1.5rem; color: var(--primary); }
        .header p { margin: 5px 0 0; color: var(--text-muted); font-size: 0.9rem; }

        .btn-login {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: 0.3s;
            box-shadow: 0 5px 15px rgba(78, 84, 200, 0.3);
        }
        .btn-login:hover { transform: translateY(-2px); }
        .btn-logout { background: #ff6b6b; margin-top: auto; display: none; }

        .task-list {
            flex-grow: 1;
            overflow-y: auto;
            margin-top: 20px;
            padding-right: 5px;
        }
        .task-item {
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            border-left: 5px solid #ddd;
            transition: 0.2s;
        }
        .task-item:hover { transform: translateX(5px); }
        .task-time { font-size: 0.8rem; color: var(--text-muted); font-weight: 600; }
        .task-title { font-size: 1rem; margin-top: 3px; font-weight: 500; }

        /* --- Main Content (Clock) --- */
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            background: radial-gradient(circle at center, #ffffff 0%, #f8f9fa 100%);
        }

        .clock-wrapper {
            position: relative;
            width: 450px;
            height: 450px;
        }
        canvas {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg); /* 12:00 ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô */
        }

        .center-info {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: none;
        }
        .time-big { font-size: 3.5rem; font-weight: 600; color: var(--primary); margin: 0; line-height: 1;}
        .date-small { font-size: 1rem; color: #999; margin-top: 5px; }

        /* --- Floating Add Button --- */
        .fab {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(78, 84, 200, 0.4);
            transition: 0.3s;
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô */
        }
        .fab:hover { transform: scale(1.1) rotate(90deg); }

        /* --- Modal (Popup ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô) --- */
        .modal {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center; align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 350px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp { from {transform: translateY(20px); opacity:0;} to {transform: translateY(0); opacity:1;} }
        
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666; }
        .form-control { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-family: 'Prompt'; box-sizing: border-box; }
        .btn-save { width: 100%; background: var(--primary); color: white; border: none; padding: 12px; border-radius: 10px; cursor: pointer; font-size: 1rem; }
        .close-modal { float: right; cursor: pointer; color: #999; }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .app-container { flex-direction: column-reverse; height: 95vh; }
            .sidebar { width: 100%; height: 40%; padding: 20px; box-sizing: border-box;}
            .main-content { height: 60%; }
            .clock-wrapper { width: 300px; height: 300px; }
            .time-big { font-size: 2.5rem; }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="sidebar">
            <div class="header">
                <h1>My Planner</h1>
                <p id="user-status">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            </div>

            <button id="authBtn" class="btn-login" onclick="handleAuth()">
                <i class="fab fa-google"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google
            </button>

            <div class="task-list" id="taskList">
                <div style="text-align:center; color:#ccc; margin-top:50px;">
                    <i class="fas fa-calendar-times fa-3x"></i><br><br>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                </div>
            </div>

            <button id="logoutBtn" class="btn-login btn-logout" onclick="handleSignout()">
                <i class="fas fa-sign-out-alt"></i> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
            </button>
        </div>

        <div class="main-content">
            <div class="clock-wrapper">
                <canvas id="clock" width="900" height="900"></canvas>
                <div class="center-info">
                    <h1 class="time-big" id="currentTime">--:--</h1>
                    <div class="date-small" id="currentDate">...</div>
                </div>
            </div>
            
            <button class="fab" id="addBtn" onclick="openModal()">+</button>
        </div>
    </div>

    <div class="modal" id="eventModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 style="margin-top:0;">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</h2>
            <div class="form-group">
                <label>‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</label>
                <input type="text" id="eventTitle" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°, ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢">
            </div>
            <div class="form-group">
                <label>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°</label>
                <input type="datetime-local" id="eventStart" class="form-control">
            </div>
            <div class="form-group">
                <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏ö</label>
                <input type="datetime-local" id="eventEnd" class="form-control">
            </div>
            <button class="btn-save" onclick="saveEvent()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
        </div>
    </div>

    <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
    <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>

    <script>
        // ==========================================
        // üîê ‡πÉ‡∏™‡πà KEY ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏∑‡∏°!)
        // ==========================================
        const CLIENT_ID = '403729551714-j8jksjp2uqoauhc7bi2ibh02bpnvtvbh.apps.googleusercontent.com'; 
        const API_KEY = 'AIzaSyC9B9m47khLErMibHa0Fjc29B2xxE8Osoo';
        // ==========================================

        const DISCOVERY_DOCS = [
        'https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest',
        'https://www.googleapis.com/discovery/v1/apis/tasks/v1/rest'
            ];
        // ‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°: .events (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ) ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà .readonly
        const SCOPES = 'https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/tasks';

        let tokenClient, gapiInited = false, gisInited = false;
        let myEvents = [];

        // --- Initialization ---
        function gapiLoaded() {
            gapi.load('client', async () => {
                await gapi.client.init({ apiKey: API_KEY, discoveryDocs: [DISCOVERY_DOC] });
                gapiInited = true; checkAutoLogin();
            });
        }
        function gisLoaded() {
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID, scope: SCOPES, callback: '', 
            });
            gisInited = true; checkAutoLogin();
        }

        // --- Auth Logic (Auto Login) ---
        function checkAutoLogin() {
            if (gapiInited && gisInited) {
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏¢‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏ß‡πâ‡πÑ‡∏´‡∏°‡πÉ‡∏ô LocalStorage
                const savedToken = localStorage.getItem('g_token');
                if (savedToken) {
                    // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏•‡∏¢ (Token ‡∏≠‡∏≤‡∏à‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ Google ‡∏à‡∏∞‡∏ü‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏á)
                    try {
                        gapi.client.setToken(JSON.parse(savedToken));
                        toggleState(true);
                        fetchEvents();
                    } catch(e) {
                        console.log("Token invalid");
                    }
                }
            }
        }

        function handleAuth() {
            tokenClient.callback = async (resp) => {
                if (resp.error) throw resp;
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Token (‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Refresh ‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏´‡∏•‡∏∏‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                localStorage.setItem('g_token', JSON.stringify(gapi.client.getToken()));
                toggleState(true);
                await fetchEvents();
            };
            if (gapi.client.getToken() === null) tokenClient.requestAccessToken({prompt: 'consent'});
            else tokenClient.requestAccessToken({prompt: ''});
        }

        function handleSignout() {
            const token = gapi.client.getToken();
            if (token !== null) {
                google.accounts.oauth2.revoke(token.access_token);
                gapi.client.setToken('');
                localStorage.removeItem('g_token');
                toggleState(false);
                myEvents = [];
                drawClock();
            }
        }

        function toggleState(isLoggedIn) {
            const authBtn = document.getElementById('authBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const addBtn = document.getElementById('addBtn');
            const userStatus = document.getElementById('user-status');

            if (isLoggedIn) {
                authBtn.style.display = 'none';
                logoutBtn.style.display = 'flex';
                addBtn.style.display = 'block';
                userStatus.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...";
                userStatus.style.color = "green";
            } else {
                authBtn.style.display = 'flex';
                logoutBtn.style.display = 'none';
                addBtn.style.display = 'none';
                userStatus.innerText = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì";
                userStatus.style.color = "#888";
            }
        }

        // --- Fetch & Add Events ---
        async function fetchEvents() {
            try {
                const now = new Date();
                const startOfDay = new Date(now.setHours(0,0,0,0)).toISOString();
                const endOfDay = new Date(now.setHours(23,59,59,999)).toISOString();

                const response = await gapi.client.calendar.events.list({
                    'calendarId': 'primary',
                    'timeMin': startOfDay,
                    'timeMax': endOfDay,
                    'showDeleted': false,
                    'singleEvents': true,
                    'orderBy': 'startTime',
                });

                myEvents = response.result.items;
                renderTaskList();
                drawClock();
                document.getElementById('user-status').innerText = `‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${new Date().toLocaleTimeString()}`;
            } catch (err) {
                console.error(err);
                if(err.status === 401) {
                     // Token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
                     handleSignout();
                     alert("Session ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà");
                }
            }
        }

        async function saveEvent() {
            const summary = document.getElementById('eventTitle').value;
            const startVal = document.getElementById('eventStart').value; // format: 2023-12-31T12:00
            const endVal = document.getElementById('eventEnd').value;

            if(!summary || !startVal || !endVal) { alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö"); return; }

            const event = {
                'summary': summary,
                'start': { 'dateTime': new Date(startVal).toISOString() },
                'end': { 'dateTime': new Date(endVal).toISOString() }
            };

            try {
                await gapi.client.calendar.events.insert({
                    'calendarId': 'primary',
                    'resource': event
                });
                closeModal();
                alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
                fetchEvents(); // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
            } catch (err) {
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + err.message);
            }
        }

        // --- UI Rendering (Clock & List) ---
        const canvas = document.getElementById('clock');
        const ctx = canvas.getContext('2d');
        const cx = 450, cy = 450, r = 400; // High Resolution Canvas

        function renderTaskList() {
            const list = document.getElementById('taskList');
            list.innerHTML = '';
            
            if(myEvents.length === 0) {
                 list.innerHTML = '<div style="text-align:center; color:#ccc; margin-top:50px;">‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤<br>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>';
                 return;
            }

            myEvents.forEach((ev, idx) => {
                if(!ev.start.dateTime) return;
                const start = new Date(ev.start.dateTime);
                const end = new Date(ev.end.dateTime);
                const color = ev.colorId ? '#4e54c8' : `hsl(${idx*50}, 70%, 60%)`;

                const item = document.createElement('div');
                item.className = 'task-item';
                item.style.borderLeftColor = color;
                item.innerHTML = `
                    <div class="task-time" style="color:${color}">
                        ${start.toLocaleTimeString('th-TH', {hour:'2-digit', minute:'2-digit'})} - 
                        ${end.toLocaleTimeString('th-TH', {hour:'2-digit', minute:'2-digit'})}
                    </div>
                    <div class="task-title">${ev.summary}</div>
                `;
                list.appendChild(item);
            });
        }

        function drawClock() {
            const now = new Date();
            // Update Text
            document.getElementById('currentTime').innerText = now.toLocaleTimeString('th-TH', {hour:'2-digit', minute:'2-digit'});
            document.getElementById('currentDate').innerText = now.toLocaleDateString('th-TH', {weekday:'long', day:'numeric', month:'long'});

            ctx.clearRect(0, 0, 900, 900);

            // 1. ‡∏ß‡∏≤‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏î
            ctx.beginPath(); ctx.arc(cx, cy, r, 0, 2*Math.PI); 
            ctx.fillStyle = 'white'; ctx.fill(); 
            ctx.strokeStyle = '#eee'; ctx.lineWidth = 2; ctx.stroke();

            // 2. ‡∏ß‡∏≤‡∏î Events (Arc)
            myEvents.forEach((ev, idx) => {
                if(!ev.start.dateTime) return;
                const start = new Date(ev.start.dateTime);
                const end = new Date(ev.end.dateTime);
                const color = ev.colorId ? '#4e54c8' : `hsl(${idx*50}, 70%, 60%)`;

                // Convert Time to Angle (12-hour clock face like Sectograph)
                // 12 hours = 720 minutes = 2 PI
                const startMin = (start.getHours() % 12) * 60 + start.getMinutes();
                const endMin = (end.getHours() % 12) * 60 + end.getMinutes();
                
                let startAngle = (startMin / 720) * 2 * Math.PI;
                let endAngle = (endMin / 720) * 2 * Math.PI;

                if (endAngle < startAngle) endAngle += 2 * Math.PI; // ‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á

                ctx.beginPath();
                ctx.moveTo(cx, cy);
                ctx.arc(cx, cy, r, startAngle, endAngle);
                ctx.fillStyle = color;
                ctx.globalAlpha = 0.6; // ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡∏ô‡∏¥‡∏î‡πÜ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏™‡∏ß‡∏¢
                ctx.fill();
                ctx.globalAlpha = 1.0;
            });

            // 3. ‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ö‡∏≠‡∏Å‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
            for(let i=0; i<12; i++) {
                const angle = (i/12) * 2 * Math.PI;
                ctx.beginPath();
                ctx.moveTo(cx + Math.cos(angle)*(r-20), cy + Math.sin(angle)*(r-20));
                ctx.lineTo(cx + Math.cos(angle)*r, cy + Math.sin(angle)*r);
                ctx.strokeStyle = '#ddd'; ctx.lineWidth = 4; ctx.stroke();
            }

            // 4. ‡πÄ‡∏Ç‡πá‡∏°‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤ (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
            const curMin = (now.getHours() % 12) * 60 + now.getMinutes();
            const curAngle = (curMin / 720) * 2 * Math.PI;

            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.arc(cx, cy, r, curAngle, curAngle);
            ctx.strokeStyle = '#ff4757'; ctx.lineWidth = 8; ctx.stroke();
            
            // ‡∏à‡∏∏‡∏î‡πÅ‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏õ‡∏•‡∏≤‡∏¢
            const tipX = cx + Math.cos(curAngle) * r;
            const tipY = cy + Math.sin(curAngle) * r;
            ctx.beginPath(); ctx.arc(tipX, tipY, 15, 0, 2*Math.PI); 
            ctx.fillStyle = '#ff4757'; ctx.fill();
        }

        // --- Modal Control ---
        function openModal() {
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('eventStart').value = now.toISOString().slice(0,16);
            now.setHours(now.getHours() + 1);
            document.getElementById('eventEnd').value = now.toISOString().slice(0,16);
            
            document.getElementById('eventModal').style.display = 'flex';
        }
        function closeModal() { document.getElementById('eventModal').style.display = 'none'; }
        
        // Loop Update Clock
        setInterval(drawClock, 1000);
        setInterval(fetchEvents, 300000); // Auto Sync ‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ

    </script>
</body>
</html>
